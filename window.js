const e="08401dd4-d0dc-43dd-8d53-610a0ea892c3",t="M"+e,n="T"+e;var r=e=>({value:new Promise((t=>{let n=new Worker("data:application/javascript,onmessage%3D(%7Bdata%3Ab%7D)%3D%3E(Atomics.wait(b%2C0)%2CpostMessage(0))");n.onmessage=t,n.postMessage(e)}))})
/*! (c) Andrea Giammarchi - ISC */;const{Int32Array:s,Map:a,SharedArrayBuffer:o,Uint16Array:i}=globalThis,{BYTES_PER_ELEMENT:c}=s,{BYTES_PER_ELEMENT:l}=i,{isArray:f}=Array,{notify:u,wait:p,waitAsync:g}=Atomics,{fromCharCode:y}=String;let d=()=>{};const w=(e,t)=>e?(g||r)(t,0):(function(e){for(;;)switch(p(e,0,0,50)){case"ok":return;case"timed-out":d()}}(t),{value:{then:e=>e()}}),h=new WeakSet,m=new WeakMap;let b=0;const v=(t,{parse:n,stringify:r,transform:p}=JSON)=>{if(!m.has(t)){const g=(n,...r)=>{t.postMessage({[e]:r},{transfer:n})};let d=!1;m.set(t,new Proxy(new a,{has:(e,t)=>"string"==typeof t&&!t.startsWith("_"),get:(e,r)=>"then"===r?null:(...e)=>{const a=b++;let f=new s(new o(c)),u=[];h.has(e.at(-1)||u)&&h.delete(u=e.pop()),g(u,a,f,r,p?e.map(p):e);const m=t!==globalThis;let v=0;return d&&m&&(v=setTimeout(console.warn,1e3,`ðŸ’€ðŸ”’ - Possible deadlock if proxy.${r}(...args) is awaited`)),w(m,f).value.then((()=>{clearTimeout(v);const e=f[0];if(!e)return;const t=l*e;return f=new s(new o(t+t%c)),g([],a,f),w(m,f).value.then((()=>n(y(...new i(f.buffer).slice(0,e)))))}))},set(n,s,o){if(!n.size){const s=new a;t.addEventListener("message",(async t=>{const a=t.data?.[e];if(f(a)){t.stopImmediatePropagation();const[e,o,...c]=a;if(c.length){const[t,a]=c;if(!n.has(t))throw new Error(`Unsupported action: ${t}`);d=!0;try{const i=await n.get(t)(...a);if(void 0!==i){const t=r(p?p(i):i);s.set(e,t),o[0]=t.length}}finally{d=!1}}else{const t=s.get(e);s.delete(e);for(let e=new i(o.buffer),n=0;n<t.length;n++)e[n]=t.charCodeAt(n)}u(o,0)}}))}return!!n.set(s,o)}}))}return m.get(t)};v.transfer=(...e)=>(h.add(e),e),v.setInterruptHandler=function(e){d=e};const E="object",P="function",k="number",M="string",T="undefined",A="symbol",{defineProperty:x,getOwnPropertyDescriptor:W,getPrototypeOf:S,isExtensible:O,ownKeys:C,preventExtensions:L,set:R,setPrototypeOf:I}=Reflect,{assign:D,create:$}=Object,_=S(Int8Array),B="isArray",j=(e,t)=>{const{get:n,set:r,value:s}=e;return n&&(e.get=t(n)),r&&(e.set=t(r)),s&&(e.value=t(s)),e},z=(e,t)=>[e,t],H=e=>t=>{const n=typeof t;switch(n){case E:if(null==t)return z("null",t);if(t===globalThis)return z(E,null);case P:return e(n,t);case"boolean":case k:case M:case T:case"bigint":return z(n,t);case A:if(N.has(t))return z(n,N.get(t))}throw new Error(`Unable to handle this ${n} type`)},N=new Map(C(Symbol).filter((e=>typeof Symbol[e]===A)).map((e=>[Symbol[e],e]))),U=e=>{for(const[t,n]of N)if(n===e)return t};function F(){return this}const K="apply",Y="construct",J="defineProperty",q="deleteProperty",G="get",Q="getOwnPropertyDescriptor",V="getPrototypeOf",X="has",Z="isExtensible",ee="ownKeys",te="preventExtensions",ne="set",re="setPrototypeOf",se="delete";var ae=((e,t)=>{const n=t&&new WeakMap;if(t){const{addEventListener:e}=EventTarget.prototype;x(EventTarget.prototype,"addEventListener",{value(t,r,...s){return s.at(0)?.invoke&&(n.has(this)||n.set(this,new Map),n.get(this).set(t,[].concat(s[0].invoke)),delete s[0].invoke),e.call(this,t,r,...s)}})}const r=t&&(e=>{const{currentTarget:t,target:r,type:s}=e;for(const a of n.get(t||r)?.get(s)||[])e[a]()});return(n,s,a,...o)=>{let i=0;const c=new Map,l=new Map,{[a]:f}=n,u=o.length?D($(globalThis),...o):globalThis,p=H(((e,t)=>{if(!c.has(t)){let e;for(;l.has(e=i++););c.set(t,e),l.set(e,t)}return z(e,c.get(t))})),g=new FinalizationRegistry((e=>{f(se,z(M,e))})),y=([e,n])=>{switch(e){case E:if(null==n)return u;if(typeof n===k)return l.get(n);if(!(n instanceof _))for(const e in n)n[e]=y(n[e]);return n;case P:if(typeof n===M){if(!l.has(n)){const e=function(...e){return t&&e.at(0)instanceof Event&&r(...e),f(K,z(P,n),p(this),e.map(p))},s=new WeakRef(e);l.set(n,s),g.register(e,n,s)}return l.get(n).deref()}return l.get(n);case A:return U(n)}return n},d={[K]:(e,t,n)=>p(e.apply(t,n)),[Y]:(e,t)=>p(new e(...t)),[J]:(e,t,n)=>p(x(e,t,n)),[q]:(e,t)=>p(delete e[t]),[V]:e=>p(S(e)),[G]:(e,t)=>p(e[t]),[Q]:(e,t)=>{const n=W(e,t);return n?z(E,j(n,p)):z(T,n)},[X]:(e,t)=>p(t in e),[Z]:e=>p(O(e)),[ee]:e=>z(E,C(e).map(p)),[te]:e=>p(L(e)),[ne]:(e,t,n)=>p(R(e,t,n)),[re]:(e,t)=>p(I(e,t)),[se](e){c.delete(l.get(e)),l.delete(e)}};return n[s]=(e,t,...n)=>{switch(e){case K:n[0]=y(n[0]),n[1]=n[1].map(y);break;case Y:n[0]=n[0].map(y);break;case J:{const[e,t]=n;n[0]=y(e);const{get:r,set:s,value:a}=t;r&&(t.get=y(r)),s&&(t.set=y(s)),a&&(t.value=y(a));break}default:n=n.map(y)}return d[e](y(t),...n)},{proxy:n,[e.toLowerCase()]:u,[`is${e}Proxy`]:()=>!1}}})("Window",!0),oe=(e=>{let t=0;const n=new Map,r=new Map,s=Symbol(),a=e=>typeof e===P?e():e,o=e=>typeof e===E&&!!e&&s in e,i=Array[B],c=H(((e,o)=>{if(s in o)return a(o[s]);if(e===P){if(!r.has(o)){let e;for(;r.has(e=String(t++)););n.set(o,e),r.set(e,o)}return z(e,n.get(o))}if(!(o instanceof _))for(const e in o)o[e]=c(o[e]);return z(e,o)}));return(t,l,f)=>{const{[l]:u}=t,p=new Map,g=new FinalizationRegistry((e=>{p.delete(e),u(se,c(e))})),y=e=>{const[t,n]=e;if(!p.has(n)){const r=t===P?F.bind(e):e,s=new Proxy(r,h),a=new WeakRef(s);p.set(n,a),g.register(s,n,a)}return p.get(n).deref()},d=e=>{const[t,n]=e;switch(t){case E:return null===n?globalThis:typeof n===k?y(e):n;case P:return typeof n===M?r.get(n):y(e);case A:return U(n)}return n},w=(e,t,...n)=>d(u(e,a(t),...n)),h={[K]:(e,t,n)=>w(K,e,c(t),n.map(c)),[Y]:(e,t)=>w(Y,e,t.map(c)),[J]:(e,t,n)=>{const{get:r,set:s,value:a}=n;return typeof r===P&&(n.get=c(r)),typeof s===P&&(n.set=c(s)),typeof a===P&&(n.value=c(a)),w(J,e,c(t),n)},[q]:(e,t)=>w(q,e,c(t)),[V]:e=>w(V,e),[G]:(e,t)=>t===s?e:w(G,e,c(t)),[Q]:(e,t)=>{const n=w(Q,e,c(t));return n&&j(n,d)},[X]:(e,t)=>t===s||w(X,e,c(t)),[Z]:e=>w(Z,e),[ee]:e=>w(ee,e).map(d),[te]:e=>w(te,e),[ne]:(e,t,n)=>w(ne,e,c(t),c(n)),[re]:(e,t)=>w(re,e,c(t))};t[f]=(e,t,s,a)=>{switch(e){case K:return d(t).apply(d(s),a.map(d));case se:{const e=d(t);n.delete(r.get(e)),r.delete(e)}}};const m=new Proxy([E,null],h),b=m.Array[B];return x(Array,B,{value:e=>o(e)?b(e):i(e)}),{[e.toLowerCase()]:m,[`is${e}Proxy`]:o,proxy:t}}})("Window"),ie="function"==typeof Worker?Worker:class{};const ce=new WeakMap,le=(e,...r)=>{const s=v(e,...r);if(!ce.has(s)){const r=e instanceof ie?ae:oe;ce.set(s,r(s,t,n))}return ce.get(s)};le.transfer=v.transfer,le.setInterruptHandler=v.setInterruptHandler;export{le as default};
